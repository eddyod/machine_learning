<!DOCTYPE html>
<html>
<head>
  <title>Practical Machine Learning Prediction Assignment Writeup</title>
  <meta charset="utf-8">
  <meta name="description" content="Wealth Accumulation Simulator">
  <meta name="author" content="Edward O'Donnell">
  <meta name="generator" content="slidify" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/default.css" media="all" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/phone.css" 
    media="only screen and (max-device-width: 480px)" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/slidify.css" >
  <link rel="stylesheet" href="libraries/highlighters/highlight.js/css/tomorrow.css" />
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->  <link rel=stylesheet href="./assets/css/ribbons.css"></link>

  
  <!-- Grab CDN jQuery, fall back to local if offline -->
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
  <script>window.jQuery || document.write('<script src="libraries/widgets/quiz/js/jquery.js"><\/script>')</script> 
  <script data-main="libraries/frameworks/io2012/js/slides" 
    src="libraries/frameworks/io2012/js/require-1.0.8.min.js">
  </script>
  
  

</head>
<body style="opacity: 0">
  <slides class="layout-widescreen">
    
    <!-- LOGO SLIDE -->
        <slide class="title-slide segue nobackground">
  <hgroup class="auto-fadein">
    <h1>Practical Machine Learning</h1>
    <h2>Prediction Assignment Writeup</h2>
    <p>Use your keyboard's left and right arrow keys to navigate the pages.</p>
    <p style="font-size:smaller;"><a href="http://www.mephistosoftware.com/wp/edward_odonnell_curriculum_mortem">eddyod</a></p>
  </hgroup>
  <article></article>  
</slide>
    

    <!-- SLIDES -->
<slide class="title-slide segue nobackground" id="slide-1">
  <hgroup style="padding:5px 50px 0px 10px;">
    <h2>Prediction Assignment Writeup</h2>
 
    <p>This presentation will demonstrate how to predict the manner in which users performed an exercise and if they performed
    the exercise correctly. 
    Data was collected from six people that had devices attached to their bodies  which monitored the movement of the person while exercising.
    They were asked to perform barbell lifts correctly and incorrectly in 5 different ways. More information is available from the 
    website here: http://groupware.les.inf.puc-rio.br/har (see the section on the Weight Lifting Exercise Dataset). 
    Data was provided in a training and a testing sets. The outcome variable (dependent variable) is named: "classe" variable in the data  sets. 
    Analysis of the data will consist of:
    </p>
    <ul>
    <li>Data will be loaded, cleaned and prepared into testing, training and validation sets.</li>
    <li>Random Forest will be used to build the model</li>
    <li>Predictions will be used to predict 20 different test cases.</li>
    </ul>
    <p style="font-weight:bolder;font-size:smaller;">Use your keyboard's left and right arrow keys to navigate the pages.</p>
    <p style="font-size:smaller;"><a href="http://www.mephistosoftware.com/wp/edward_odonnell_curriculum_mortem">eddyod</a></p>
  </hgroup>


</slide>
 
<slide class="title-slide segue nobackground" id="slide-2">
<hgroup style="padding:5px 50px 0px 10px; font-size:smaller;">

<h2>Getting the data</h2>
<p>First we have to get and load the data.</p>

<pre style="font-size:smaller;"><code class="r">
setwd("~/programming/machine_learning")
library("caret")
training <- read.csv("~/programming/machine_learning/pml-training.csv")
testing <- read.csv("~/programming/machine_learning/pml-testing.csv")
</code>
</pre>

<p style="font-weight:bolder;font-size:smaller;">Use your keyboard's left and right arrow keys to navigate the pages.</p>
<p style="font-size:smaller;"><a href="http://www.mephistosoftware.com/wp/edward_odonnell_curriculum_mortem">eddyod</a></p>
</hgroup>

</slide>
 
<slide class="title-slide segue nobackground" id="slide-2">
<hgroup style="padding:5px 50px 0px 10px; font-size:smaller;">

<h2>Preparing the data</h2>

<pre style="font-size:smaller;"><code class="r">
upper_limit <- dim(training)[1] * 0.95
#Remove columns with more than 95% of NA or empty values
goodColumns <- !apply(training, 2, function(x) sum(is.na(x)) > upper_limit  || sum(x=="") > upper_limit)
training <- training[, goodColumns]
badColumns <- nearZeroVar(training, saveMetrics = TRUE)
training <- training[, badColumns$nzv==FALSE]
training$classe = factor(training$classe)
inTrain <- createDataPartition(training$classe, p = 0.6)[[1]]
crossvalidation <- training[-inTrain,]
training <- training[ inTrain,]
inTrain <- createDataPartition(crossvalidation$classe, p = 0.75)[[1]]
crossvalidation_test <- crossvalidation[ -inTrain,]
crossvalidation <- crossvalidation[inTrain,]
testing <- testing[, 6:dim(testing)[2]]
testing <- testing[, goodColumns]
testing$classe <- NA
testing <- testing[, badColumns$nzv==FALSE]
</code>
</pre>

</hgroup>

</slide>
 
<slide class="title-slide segue nobackground" id="slide-3">
<hgroup style="padding:5px 50px 0px 10px; font-size:smaller;">

<h2>Building the Random Forest Model</h2>
<p>The random forest model is built with the caret library. First we create the model, then use the model to predict against
the cross validation data. Finally we print out the confusion matrix to view the results.</p>

<pre style="font-size:smaller;"><code class="r">
# create random forest model
modFit <- train(classe ~ ., data=training, method="rf")
predModFit <- predict(modFit, crossvalidation)
# print confusion matrices
confusionMatrix(predModFit, crossvalidation$classe)
</code>
</pre>

<p style="font-weight:bolder;font-size:smaller;">Use your keyboard's left and right arrow keys to navigate the pages.</p>
<p style="font-size:smaller;"><a href="http://www.mephistosoftware.com/wp/edward_odonnell_curriculum_mortem">eddyod</a></p>
</hgroup>

</slide>

<slide class="title-slide segue nobackground" id="slide-4">
  <hgroup style="padding:5px 50px 0px 10px; font-size:smaller;">

<h2>Prediction</h2>
<p>We use the supplied function to write the answers for the actual submission</p>
<pre style="font-size:smaller;"><code class="r">
pml_write_files = function(x){
  n = length(x)
  for(i in 1:n){
    filename = paste0("problem_id_",i,".txt")
    write.table(x[i],file=filename,quote=FALSE,row.names=FALSE,col.names=FALSE)
  }
}

pml_write_files(predModFit)
</code>
</pre>

</hgroup>

</slide>

<slide class="title-slide segue nobackground" id="slide-5">
  <hgroup style="padding:5px 50px 0px 10px;">

<h2>Conclusion Part 1</h2>
<p>The accuracy results from the confusion matrix gave a good prediction and after submitting the answers a score of 20/20 was
received so everything worked out well.</p>

<pre><code class="r">
          Reference
Prediction    A    B    C    D    E
         A 1672    5    0    0    0
         B    1 1132    6    0    0
         C    0    2 1020   11    0
         D    0    0    0  953    4
         E    1    0    0    1 1078

Overall Statistics
                                        
               Accuracy : 0.995         
                 95% CI : (0.993, 0.996)
    No Information Rate : 0.284         
    P-Value [Acc > NIR] : <2e-16        
                                        
                  Kappa : 0.993         
 Mcnemar's Test P-Value : NA            
</code>
</pre>

</hgroup>

</slide>

<slide class="title-slide segue nobackground" id="slide-6">
  <hgroup style="padding:5px 50px 0px 10px;">

<h2>Conclusion Part 2</h2>
<p></p>

<pre><code class="r">
Statistics by Class:

                     Class: A Class: B Class: C Class: D
Sensitivity             0.999    0.994    0.994    0.988
Specificity             0.999    0.999    0.997    0.999
Pos Pred Value          0.997    0.994    0.987    0.996
Neg Pred Value          1.000    0.999    0.999    0.998
Prevalence              0.284    0.194    0.174    0.164
Detection Rate          0.284    0.192    0.173    0.162
Detection Prevalence    0.285    0.194    0.176    0.163
Balanced Accuracy       0.999    0.996    0.996    0.993
                     Class: E
Sensitivity             0.996
Specificity             1.000
Pos Pred Value          0.998
Neg Pred Value          0.999
Prevalence              0.184
Detection Rate          0.183
Detection Prevalence    0.183
Balanced Accuracy       0.998
</code>
</pre>

</hgroup>

</slide>



    <slide class="backdrop"></slide>
    
</slides>
  <div class="pagination pagination-small" id='io2012-ptoc' style="display:none;">
    <ul>
      <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=1 title='Machine Learning'>
         1
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=2 title='Intro'>
         2
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=3 title='Data'>
         3
      </a>
    </li>
    <li>
      <a href="#" target="_self" rel='tooltip' 
        data-slide=4 title='Model'>
         4
      </a>
    </li>
  </ul>
  </div>  <!--[if IE]>
    <script 
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">  
    </script>
    <script>CFInstall.check({mode: 'overlay'});</script>
  <![endif]-->
</body>
  <!-- Load Javascripts for Widgets -->
  
  <!-- LOAD HIGHLIGHTER JS FILES -->
  <script src="libraries/highlighters/highlight.js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <!-- DONE LOADING HIGHLIGHTER JS FILES -->
   
  </html>
